#### ⚙️ OCI Compute Issues Due to Automation Workflow Failures – With Solutions & Terraform Commands

| #  | Category                   | Issue                           | Description / Example                                      | ✅ Solution & Terraform/CLI Commands                                                   |
|----|----------------------------|----------------------------------|-------------------------------------------------------------|----------------------------------------------------------------------------------------|
| 1  | Instance Creation          | Invalid shape or image OCID      | Automation uses outdated OCIDs                              | ✅ Validate OCIDs: `oci compute image list`, `oci compute shape list`                 |
|    |                            |                                  |                                                             | ✅ Terraform: Use `data "oci_core_images"` and `data "oci_core_shapes"`               |
| 2  | Boot Volume Attach         | Boot volume not found / detached | Volume not reattached after rebuild                         | ✅ Use: `oci compute boot-volume-attachment attach`                                   |
|    |                            |                                  |                                                             | ✅ Terraform: `oci_core_boot_volume_attachment` resource                              |
| 3  | Subnet/VCN Mapping         | Invalid subnet or wrong region   | Wrong region or compartment referenced                      | ✅ CLI: `oci network subnet list` in correct region                                   |
|    |                            |                                  |                                                             | ✅ Terraform: Use correct region in `provider` block                                  |
| 4  | AD Misconfiguration        | Shape not available in AD        | Shape chosen not supported in selected AD                   | ✅ CLI: `oci compute shape list --availability-domain <AD>`                           |
|    |                            |                                  |                                                             | ✅ Terraform: Use `data "oci_identity_availability_domains"`                          |
| 5  | IAM Missing                | Not authorized to perform action | Missing policy for instance principal                       | ✅ OCI Console: Add Dynamic Group & IAM Policy                                        |
|    |                            |                                  |                                                             | ✅ Terraform: Use `oci_identity_dynamic_group` + `oci_identity_policy`                |
| 6  | Metadata/User Data         | Cloud-init not triggered         | User data script didn't run                                 | ✅ Check `/var/log/cloud-init.log`                                                    |
|    |                            |                                  |                                                             | ✅ Terraform: Use `metadata = { user_data = base64encode(file("init.sh")) }`          |
| 7  | Auto-recovery Skipped      | Instance not recovered           | Alarms not triggering auto-recovery                         | ✅ Validate: `oci monitoring alarm list`                                              |
|    |                            |                                  |                                                             | ✅ Terraform: Use `oci_monitoring_alarm` + recovery action                            |
| 8  | SSH Key Issues             | Permission denied                | Invalid or missing SSH key                                  | ✅ Check `~/.ssh/authorized_keys`, validate key format                                |
|    |                            |                                  |                                                             | ✅ Terraform: `metadata = { ssh_authorized_keys = file("~/.ssh/id_rsa.pub") }`        |
| 9  | Tagging Policy Block       | Tagging policy prevents creation | Required tags missing                                       | ✅ Review: `oci iam tag-default list`                                                 |
|    |                            |                                  |                                                             | ✅ Terraform: Use `defined_tags` or `freeform_tags` block                             |
| 10 | Wrong Compartment          | Resources in wrong compartment   | Compartment OCID incorrect or hardcoded                     | ✅ CLI: `oci iam compartment list`                                                    |
|    |                            |                                  |                                                             | ✅ Terraform: Pass compartment ID via `var.compartment_ocid`                          |
| 11 | Terraform State Drift      | Destroy/provision fails          | Manual changes outside Terraform                            | ✅ Run: `terraform plan -refresh-only`, `terraform import`                            |
| 12 | Dependency Issues          | Startup order fails              | App instance depends on DB/backend but starts first         | ✅ Terraform: Use `depends_on` for dependency chaining                                |
| 13 | Corrupt Custom Image       | Instance failed to boot          | Broken image missing drivers or OCI agent                   | ✅ Test custom images manually before automating                                      |
|    |                            |                                  |                                                             | ✅ Terraform: Use `source_details` to define custom image                             |
| 14 | NSG/Security List Error    | Instance not reachable           | NSG or rules missing                                        | ✅ CLI: `oci network nsg list`, `oci network security-list list`                      |
|    |                            |                                  |                                                             | ✅ Terraform: Use `oci_core_network_security_group` and add ingress rules             |
| 15 | CLI/SDK Throttling         | 429 Too Many Requests            | Rate-limited by OCI APIs                                    | ✅ Use retry with backoff logic in scripts                                            |
|    |                            |                                  |                                                             | ✅ Terraform: Use `lifecycle { create_before_destroy = true }` to manage retries      |
| 16 | Quota Exceeded             | Quota limit exceeded             | Automation failed to check limits                           | ✅ CLI: `oci limits resource-availability get`                                        |
|    |                            |                                  |                                                             | ✅ Terraform: Use `oci_limits_quota` data source to validate                          |
| 17 | Race Conditions            | Setup conflicts                  | Multiple concurrent setups causing failure                  | ✅ Serialize provisioning via `depends_on`, CI job sync                               |
| 18 | Agent Plugin Missing       | Monitoring/backup fails          | Instance image lacks agent                                  | ✅ Reinstall: `/usr/lib/oracle/oci-cli/oci-cli install agent`                         |
|    |                            |                                  |                                                             | ✅ Terraform: Confirm image supports plugins                                          |
| 19 | Lifecycle Hook Failure     | Post-provision steps skipped     | Remote-exec or user-data fails due to access issues         | ✅ Check: `cloud-init-output.log`, test SSH access                                    |
|    |                            |                                  |                                                             | ✅ Terraform: Use `remote-exec` with retry & SSH key                                  |
| 20 | Failed Cleanup             | Orphaned volumes, IPs            | Destroy fails; resources left dangling                      | ✅ Manually cleanup via: `oci compute boot-volume delete`, `oci network public-ip`    |
|    |                            |                                  |                                                             | ✅ Terraform: Use `terraform destroy` with `-target` flags if needed                  |
